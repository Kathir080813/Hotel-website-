<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mumbai Special Barbeque – Cashier Kathiravan</title>

<style>
:root{--dark:#263238;--bg:#f4f6f8;--green:#2e7d32}
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:var(--bg)}
.header{background:var(--dark);color:#fff;padding:12px;display:flex;justify-content:space-between;align-items:center}
.header h1{font-size:18px;margin:0}
.header input{padding:8px;border-radius:8px;border:none}
.container{max-width:1000px;margin:auto;padding:10px}
select{padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px;width:100%}
.menu{display:grid;gap:10px}
.menu-item{background:#fff;padding:12px;border-radius:14px;display:flex;justify-content:space-between;align-items:center}
.menu-left b{font-size:16px}
.menu-left span{color:#555}
.qty-box{display:flex;align-items:center;border:1px solid #ccc;border-radius:12px;overflow:hidden}
.qty-box button{border:none;background:#f5f5f5;padding:8px 14px;font-size:18px}
.qty-box span{min-width:30px;text-align:center;font-weight:bold}
.order{background:#fff;padding:12px;border-radius:14px;margin-top:14px}
.total{font-size:18px;font-weight:bold}
.submit-btn{width:100%;padding:14px;border:none;border-radius:14px;background:var(--green);color:#fff;font-size:18px;margin-top:8px}
.clear-btn{width:100%;padding:12px;border:none;border-radius:14px;background:#b71c1c;color:#fff;margin-top:6px}
.report-btn{width:100%;padding:12px;border:none;border-radius:14px;background:#1565c0;color:#fff;margin-top:6px}
.note{text-align:center;font-size:12px;color:#555}
</style>
</head>

<body>

<div class="header">
  <h1>Mumbai Special Barbeque – Cashier Kathiravan</h1>
  <input type="text" id="search" placeholder="Search item" oninput="filterMenu()">
</div>

<div class="container">

<select id="tableNo">
  <option value="">Select Table</option>
  <option>Table 1</option><option>Table 2</option><option>Table 3</option>
  <option>Table 4</option><option>Table 5</option><option>Table 6</option>
  <option>Table 7</option><option>Table 8</option><option>Table 9</option>
  <option>Table 10</option>
</select>

<div class="menu" id="menu"></div>

<div class="order">
<h3>Order</h3>
<ul id="orderList"></ul>
<div class="total">Total: ₹<span id="total">0</span></div>

<button class="submit-btn" onclick="submitOrder()">Send Order to WhatsApp</button>
<button class="clear-btn" onclick="clearCart()">Clear Cart</button>
<button class="report-btn" onclick="downloadReport()">Download Sales Report</button>
<button class="clear-btn" onclick="resetSalesReport()">Reset Sales Report</button>

<div class="note">WhatsApp opens with message – tap Send</div>
</div>

</div>

<script>
// -------- MENU DATA (REORDERED) --------
const menuData = [
 ["Chicken Rice",130,"cr"],["Chicken Noodles",130,"cn"],["Egg Rice",100,"er"],
 ["Plain Briyani",100,"pb"],["Chicken Rice 1/2",150,"crh"],["Rice Combo",180,"rc"],
 ["Chicken 65",120,"c65"],["Chilli Chicken",140,"cc"],
 ["Chettinad Chicken",140,"chc"],["Chinna Chicken",120,"chinna"],
 ["Shawarma Roll",60,"sr"],["Shawarma Roll Special",120,"srs"],
 ["Grill Quarter",100,"gq"],["Grill Half",200,"gh"],["Grill Full",400,"gf"],
 ["Tandoori Quarter",100,"tq"],["Tandoori Half",200,"th"],["Tandoori Full",400,"tf"],
 ["Pepper Quarter",140,"pq"],["Pepper Half",270,"ph"],["Pepper Full",500,"pf"],
 ["BBQ Quarter",110,"bq"],["BBQ Half",210,"bh"],["BBQ Full",400,"bf"],
 ["Parotta",20,"par"],["Chapathi",20,"chap"],["Kall Dosa",20,"kd"],
 ["Egg Dosa",50,"ed"],["Egg Veechi",30,"ev"],
 ["Omelette",20,"om"],["Half Boil",20,"hb"]
];

// -------- BUILD MENU --------
const menuDiv=document.getElementById("menu");
menuData.forEach(i=>{
 menuDiv.innerHTML+=`
 <div class="menu-item" data-name="${i[0]}">
  <div class="menu-left"><b>${i[0]}</b><span>₹${i[1]}</span></div>
  <div class="qty-box">
   <button onclick="changeQty('${i[2]}','${i[0]}',${i[1]},-1)">−</button>
   <span id="q-${i[2]}">0</span>
   <button onclick="changeQty('${i[2]}','${i[0]}',${i[1]},1)">+</button>
  </div>
 </div>`;
});

// -------- ORDER SYSTEM --------
let orders={}, total=0;
const orderList=document.getElementById("orderList");
const totalSpan=document.getElementById("total");

function changeQty(k,n,p,d){
 if(!orders[k]&&d<0)return;
 if(!orders[k])orders[k]={name:n,price:p,qty:0};
 orders[k].qty+=d;
 if(orders[k].qty<=0)delete orders[k];
 document.getElementById("q-"+k).innerText=orders[k]?orders[k].qty:0;
 total+=p*d;if(total<0)total=0;render();
}

function render(){
 orderList.innerHTML="";
 for(let k in orders){
  let i=orders[k];
  orderList.innerHTML+=`<li>${i.name} x ${i.qty} = ₹${i.qty*i.price}</li>`;
 }
 totalSpan.innerText=total;
}

function clearCart(){
 orders={}; total=0;
 document.querySelectorAll(".qty-box span").forEach(s=>s.innerText=0);
 orderList.innerHTML=""; totalSpan.innerText=0;
}

// -------- SALES REPORT --------
function saveSale(table,orders,total){
 let sales=JSON.parse(localStorage.getItem("salesReport"))||[];
 let items=Object.values(orders).map(i=>`${i.name} x ${i.qty}`).join(", ");
 sales.push({date:new Date().toLocaleString(),table,items,total});
 localStorage.setItem("salesReport",JSON.stringify(sales));
}

function downloadReport(){
 let sales=JSON.parse(localStorage.getItem("salesReport"))||[];
 if(sales.length===0){alert("No sales data available");return;}
 let csv="Date,Table,Items,Total\n";
 sales.forEach(s=>csv+=`"${s.date}","${s.table}","${s.items}",${s.total}\n`);
 let blob=new Blob([csv],{type:"text/csv"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="Mumbai_Special_Barbeque_Sales_Report.csv";
 a.click();
}

function resetSalesReport(){
 if(confirm("Are you sure you want to reset the sales report?")){
  localStorage.removeItem("salesReport");
  alert("Sales report reset successfully");
 }
}

// -------- WHATSAPP --------
function submitOrder(){
 let table=document.getElementById("tableNo").value;
 if(!table||Object.keys(orders).length===0){
  alert("Select table and items");return;
 }
 saveSale(table,orders,total);

 let msg=`Mumbai Special Barbeque%0ATable: ${table}%0A`;
 for(let k in orders){
  let i=orders[k];
  msg+=`${i.name} x ${i.qty} - ₹${i.qty*i.price}%0A`;
 }
 msg+=`Total: ₹${total}`;
 window.location.href=`https://wa.me/918608776956?text=${msg}`;
}

// -------- SEARCH --------
function filterMenu(){
 let q=document.getElementById("search").value.toLowerCase();
 document.querySelectorAll(".menu-item").forEach(i=>{
  i.style.display=i.dataset.name.toLowerCase().includes(q)?"flex":"none";
 });
}
</script>

</body>
</html>
