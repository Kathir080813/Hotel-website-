<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mumbai Special BBQ</title>

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f4f4f4;
}

.header{
  background:#6d1b1b;
  color:white;
  padding:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.header input{
  padding:6px 10px;
  border-radius:6px;
  border:none;
}

.main{
  display:flex;
  height:calc(100vh - 60px);
}

.left{
  width:60%;
  overflow-y:auto;
  padding:10px;
  background:#fafafa;
}

.right{
  width:40%;
  background:white;
  padding:10px;
  border-left:2px solid #ddd;
  display:flex;
  flex-direction:column;
}

.category{
  margin-top:10px;
}

.category h3{
  background:#ff6f00;
  color:white;
  padding:5px;
  margin:5px 0;
}

.item{
  display:flex;
  justify-content:space-between;
  padding:6px;
  background:white;
  margin:4px 0;
  border-radius:6px;
}

.qty button{
  padding:2px 6px;
}

.bill-list{
  flex:1;
  overflow-y:auto;
}

.total{
  font-weight:bold;
  font-size:18px;
}

button{
  padding:8px;
  margin-top:5px;
  border:none;
  border-radius:6px;
  color:white;
  cursor:pointer;
}

.wa{background:green;}
.clear{background:red;}
.report{background:#283593;}
.reset{background:#444;}

select{
  padding:5px;
  margin-bottom:5px;
}
</style>
</head>

<body>

<div class="header">
  <div>
    <b>Mumbai Special BBQ</b><br>
    <select id="tableNo">
      <option value="">Select Table</option>
      <option>TB1</option>
      <option>TB2</option>
      <option>TB3</option>
      <option>TB4</option>
      <option>TB5</option>
      <option>TB6</option>
      <option>TB7</option>
      <option>TB8</option>
    </select>
  </div>
  <input type="text" id="search" placeholder="Search item..." oninput="filterItems()">
</div>

<div class="main">

<div class="left" id="menu"></div>

<div class="right">
  <h3>Order</h3>
  <div class="bill-list" id="orderList"></div>
  <div class="total">Total ‚Çπ <span id="total">0</span></div>

  <button class="wa" onclick="sendWA()">Send WhatsApp</button>
  <button class="clear" onclick="clearCart()">Clear Cart</button>
  <button class="report" onclick="downloadReport()">Download Sales Report</button>
  <button class="reset" onclick="resetSales()">Reset Sales Report</button>
</div>

</div>

<script>

const categories = {
"üçö Biryani":[
["Chicken Biriyani",130],
["65 Biriyani",150],
["Egg Biriyani",100],
["Plain Biriyani",90]
],
"üçó Starters":[
["Chicken 65 (5 Pcs)",130],
["Chilli Chicken Dry",140],
["Chilli Chicken Gravy",150],
["Pepper Chicken Dry",140],
["Pepper Chicken Gravy",150],
["Paneer 65",150]
],
"üî• Grill":[
["Grill Qty",100],
["Grill Half",200],
["Grill Full",400]
],
"üî• Tandoori":[
["Tandoori Qty",100],
["Tandoori Half",200],
["Tandoori Full",400]
],
"üçú Noodles":[
["Chicken Noodles",130],
["Chicken Schezwan Noodles",140],
["Egg Noodles",100],
["Veg Noodles",100]
],
"üåØ Shawarma":[
["Shawarma Roll",60],
["Shawarma Plate",130],
["Shawarma Spl Roll",100]
],
"ü´ì Dosa":[
["Plain Dosai",40],
["Kal Dosai",20],
["Egg Dosai",50],
["Kari Dosai",100]
],
"ü•ö Egg":[
["Masala Omelette Single",30],
["Masala Omelette Double",60],
["Egg Podimas",40],
["Half Boiled",20],
["Kalaki",20]
]
};

let cart={}, total=0;
const menuDiv=document.getElementById("menu");
const orderList=document.getElementById("orderList");
const totalEl=document.getElementById("total");

for(let cat in categories){
 let cDiv=document.createElement("div");
 cDiv.className="category";
 cDiv.innerHTML=`<h3>${cat}</h3>`;
 categories[cat].forEach(i=>{
   let item=document.createElement("div");
   item.className="item";
   item.innerHTML=`
     <div>${i[0]}<br>‚Çπ${i[1]}</div>
     <div class="qty">
       <button onclick="change('${i[0]}',${i[1]},-1)">-</button>
       <span id="q-${i[0]}">0</span>
       <button onclick="change('${i[0]}',${i[1]},1)">+</button>
     </div>`;
   cDiv.appendChild(item);
 });
 menuDiv.appendChild(cDiv);
}

function change(name,price,d){
 if(!cart[name] && d<0) return;
 if(!cart[name]) cart[name]={qty:0,price};
 cart[name].qty+=d;
 if(cart[name].qty<=0) delete cart[name];
 document.getElementById("q-"+name).innerText=cart[name]?cart[name].qty:0;
 render();
}

function render(){
 orderList.innerHTML="";
 total=0;
 for(let k in cart){
   let amt=cart[k].qty*cart[k].price;
   total+=amt;
   orderList.innerHTML+=`<div>${k} x ${cart[k].qty} = ‚Çπ${amt}</div>`;
 }
 totalEl.innerText=total;
}

function clearCart(){
 cart={};
 total=0;
 document.querySelectorAll(".qty span").forEach(s=>s.innerText=0);
 render();
}

function sendWA(){
 let table=document.getElementById("tableNo").value;
 if(!table || total==0){ alert("Select table & items"); return;}
 saveSale(table,total);
 let msg=`Mumbai Special BBQ%0ATable: ${table}%0A`;
 for(let k in cart){
  msg+=`${k} x ${cart[k].qty} = ‚Çπ${cart[k].qty*cart[k].price}%0A`;
 }
 msg+=`%0ATotal ‚Çπ${total}`;
 window.open("https://wa.me/918608776956?text="+msg,"_blank");
}

function saveSale(table,total){
 let sales=JSON.parse(localStorage.getItem("sales"))||[];
 sales.push({date:new Date().toLocaleString(),table,total});
 localStorage.setItem("sales",JSON.stringify(sales));
}

function downloadReport(){
 let sales=JSON.parse(localStorage.getItem("sales"))||[];
 if(!sales.length){alert("No Sales Data");return;}
 let csv="Date,Table,Total\n";
 sales.forEach(s=>csv+=`${s.date},${s.table},${s.total}\n`);
 let a=document.createElement("a");
 a.href=URL.createObjectURL(new Blob([csv],{type:"text/csv"}));
 a.download="Sales_Report.csv";
 a.click();
}

function resetSales(){
 if(confirm("Reset all sales data?")){
  localStorage.removeItem("sales");
  alert("Sales Reset");
 }
}

function filterItems(){
 let q=document.getElementById("search").value.toLowerCase();
 document.querySelectorAll(".item").forEach(i=>{
  i.style.display=i.innerText.toLowerCase().includes(q)?"flex":"none";
 });
}

</script>

</body>
</html>
