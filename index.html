<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mumbai Special Barbeque</title>

<style>
body{margin:0;font-family:Segoe UI,Arial;background:#f3efe9}
.hidden{display:none}
.header{background:#6d1b1b;color:#fff;padding:16px;text-align:center;font-size:20px}
.container{padding:16px;max-width:1200px;margin:auto}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:12px}
.table-btn{
 background:#fff;padding:18px;border-radius:14px;
 text-align:center;font-size:18px;
 box-shadow:0 2px 6px rgba(0,0,0,.2)
}
.category h3{color:#6d1b1b;border-left:6px solid #c62828;padding-left:10px}
.menu{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:10px}
.menu-item{
 background:#fff;padding:12px;border-radius:14px;
 display:flex;justify-content:space-between;align-items:center
}
.qty button{padding:4px 12px;font-size:18px}
.qty span{min-width:25px;text-align:center;display:inline-block}
.btn{width:100%;padding:14px;border:none;border-radius:14px;font-size:18px;margin-top:12px}
.green{background:#2e7d32;color:#fff}
.red{background:#c62828;color:#fff}
.blue{background:#283593;color:#fff}
</style>
</head>

<body>

<div class="header">Mumbai Special Barbeque</div>

<!-- STEP 1 TABLES -->
<div class="container" id="tables">
<h3>Select Table</h3>
<div class="grid">
<script>
for(let i=1;i<=8;i++){
 document.write(`<div class="table-btn" onclick="selectTable(${i})">TB${i}</div>`)
}
</script>
</div>
</div>

<!-- STEP 2 ORDER -->
<div class="container hidden" id="order">
<h3>Table: <span id="tableName"></span></h3>

<div class="category">
<h3>Rice / Briyani</h3>
<div class="menu" id="rice"></div>
</div>

<div class="category">
<h3>Dosa / Egg</h3>
<div class="menu" id="dosa"></div>
</div>

<div class="category">
<h3>Starters</h3>
<div class="menu" id="starters"></div>
</div>

<div class="category">
<h3>Noodles</h3>
<div class="menu" id="noodles"></div>
</div>

<button class="btn blue" onclick="goConfirm()">Next – Confirm</button>
<button class="btn red" onclick="backToTables()">Cancel</button>
</div>

<!-- STEP 3 CONFIRM -->
<div class="container hidden" id="confirm">
<h3>Confirm Order – <span id="confirmTable"></span></h3>
<ul id="summary"></ul>
<h2>Total: ₹<span id="total">0</span></h2>

<button class="btn green" onclick="finalSubmit()">Confirm & Save</button>
<button class="btn red" onclick="backToOrder()">Back</button>
</div>

<script>
let currentTable="", orders={}, total=0;

function selectTable(n){
 currentTable="TB"+n;
 tableName.innerText=currentTable;
 tables.classList.add("hidden");
 order.classList.remove("hidden");
}

function backToTables(){
 orders={}; total=0;
 order.classList.add("hidden");
 tables.classList.remove("hidden");
}

function backToOrder(){
 confirm.classList.add("hidden");
 order.classList.remove("hidden");
}

function goConfirm(){
 if(!Object.keys(orders).length){alert("No items selected");return;}
 confirmTable.innerText=currentTable;
 summary.innerHTML="";
 for(let k in orders){
  let i=orders[k];
  summary.innerHTML+=`<li>${i.name} x ${i.qty} = ₹${i.qty*i.price}</li>`;
 }
 document.getElementById("total").innerText=total;
 order.classList.add("hidden");
 confirm.classList.remove("hidden");
}

function finalSubmit(){
 saveSale();
 alert("Order Confirmed");
 location.reload();
}

function saveSale(){
 let sales=JSON.parse(localStorage.getItem("salesReport"))||[];
 let items=Object.values(orders).map(i=>`${i.name} x ${i.qty}`).join(", ");
 sales.push({table:currentTable,items,total,date:new Date().toLocaleString()});
 localStorage.setItem("salesReport",JSON.stringify(sales));
}

/* MENU BUILDER */
function addItem(div,name,price,key){
 document.getElementById(div).innerHTML+=`
 <div class="menu-item">
  <b>${name}<br>₹${price}</b>
  <div class="qty">
   <button onclick="qty('${key}','${name}',${price},-1)">−</button>
   <span id="q-${key}">0</span>
   <button onclick="qty('${key}','${name}',${price},1)">+</button>
  </div>
 </div>`;
}

function qty(k,n,p,d){
 if(!orders[k]&&d<0)return;
 if(!orders[k])orders[k]={name:n,price:p,qty:0};
 orders[k].qty+=d;
 if(orders[k].qty<=0)delete orders[k];
 document.getElementById("q-"+k).innerText=orders[k]?orders[k].qty:0;
 total+=p*d; if(total<0)total=0;
}

/* ITEMS */
addItem("rice","Chicken Rice",130,"cr");
addItem("rice","Chicken Briyani",130,"cb");
addItem("rice","Egg Rice",100,"er");

addItem("dosa","Parotta",20,"par");
addItem("dosa","Plain Dosa",40,"pd");
addItem("dosa","Egg Dosa",50,"ed");

addItem("starters","Chicken 65",120,"c65");
addItem("starters","Chilli Chicken",140,"cc");

addItem("noodles","Veg Noodles",100,"vn");
addItem("noodles","Chicken Noodles",130,"cn");
</script>

</body>
</html>
