<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mumbai Special BBQ</title>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
.header{
background:#8B0000;
color:#fff;
padding:10px;
}
h1{margin:5px 0;font-size:18px}

select,input{
width:100%;
padding:8px;
margin:4px 0;
border-radius:6px;
border:1px solid #ccc;
}

.fast{
background:#fff;
padding:8px;
display:grid;
grid-template-columns:repeat(2,1fr);
gap:6px;
}

.fast button{
padding:12px;
border:none;
background:#ff9800;
color:#fff;
border-radius:8px;
font-weight:bold;
}

.menu{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:6px;
padding:8px;
}

.item{
background:#fff;
padding:8px;
border-radius:8px;
display:flex;
justify-content:space-between;
align-items:center;
font-size:14px;
}

.qty button{
padding:4px 8px;
}

.footer{
position:fixed;
bottom:0;
left:0;
right:0;
background:#fff;
padding:8px;
box-shadow:0 -2px 5px rgba(0,0,0,0.2);
}

.total{
font-weight:bold;
font-size:18px;
margin-bottom:6px;
}

.footer button{
width:100%;
padding:10px;
margin-top:4px;
border:none;
border-radius:6px;
color:#fff;
font-weight:bold;
}

.green{background:#2e7d32}
.orange{background:#ff9800}
.blue{background:#3949ab}
.red{background:#c62828}
</style>
</head>

<body>

<div class="header">
<h1>Mumbai Special BBQ</h1>
<select id="tableSelect"></select>
<select id="payment">
<option>Cash</option>
<option>GPay</option>
<option>PhonePe</option>
<option>Card</option>
</select>
<input type="text" id="search" placeholder="Search item..." oninput="renderMenu()">
</div>

<div class="fast" id="fastItems"></div>
<div class="menu" id="menu"></div>

<div class="footer">
<div class="total">Total ₹ <span id="total">0</span></div>
<button class="green" onclick="sendWhatsApp()">Send WhatsApp</button>
<button class="orange" onclick="clearTable()">Clear Current Table</button>
<button class="blue" onclick="closeTable()">Close Table (Save)</button>
<button class="red" onclick="downloadReport()">Download Sales Report</button>
<button class="red" onclick="resetReport()">Reset Sales Report</button>
</div>

<script>
let tables = {};
let sales = JSON.parse(localStorage.getItem("sales")) || [];
let items = [

/* FAST ITEMS */
{name:"Chicken Biriyani",price:130,fast:true},
{name:"Parotta",price:20,fast:true},
{name:"Chicken Noodles",price:130,fast:true},
{name:"Grill Half",price:200,fast:true},
{name:"Tandoori Half",price:200,fast:true},
{name:"Shawarma Roll",price:60,fast:true},
{name:"Chicken 65",price:130,fast:true},
{name:"Egg Rice",price:100,fast:true},

/* FULL LIST */
{name:"Plain Biriyani",price:90},
{name:"Egg Biriyani",price:100},
{name:"65 Biriyani",price:150},
{name:"Veg Rice",price:100},
{name:"Gopi Rice",price:110},
{name:"Mushroom Rice",price:120},
{name:"Panner Rice",price:130},
{name:"Chicken Schezwan Rice",price:140},
{name:"Egg Schezwan Rice",price:110},
{name:"Veg Noodles",price:100},
{name:"Gopi Noodles",price:110},
{name:"Mushroom Noodles",price:120},
{name:"Panner Noodles",price:130},
{name:"Chicken Schezwan Noodles",price:140},
{name:"Tandoori Full",price:400},
{name:"Tandoori Qty",price:100},
{name:"Grill Full",price:400},
{name:"Grill Qty",price:100},
{name:"BBQ Half",price:210},
{name:"BBQ Full",price:400}
];

let currentTable="";
let total=0;

function initTables(){
for(let i=1;i<=8;i++){
let opt=document.createElement("option");
opt.value="Table "+i;
opt.innerText="Table "+i;
tableSelect.appendChild(opt);
}
}

tableSelect.onchange=function(){
currentTable=this.value;
if(!tables[currentTable]) tables[currentTable]={};
renderMenu();
};

function addItem(name,price){
if(!currentTable){alert("Select Table");return;}
let table=tables[currentTable];
if(!table[name]) table[name]={price:price,qty:0};
table[name].qty++;
calculateTotal();
}

function calculateTotal(){
let table=tables[currentTable]||{};
total=0;
for(let i in table){
total+=table[i].price*table[i].qty;
}
document.getElementById("total").innerText=total;
}

function renderMenu(){
let searchVal=search.value.toLowerCase();
menu.innerHTML="";
items.filter(i=>!i.fast).forEach(i=>{
if(i.name.toLowerCase().includes(searchVal)){
menu.innerHTML+=`
<div class="item">
<div>${i.name}<br>₹${i.price}</div>
<div class="qty">
<button onclick="addItem('${i.name}',${i.price})">+</button>
</div>
</div>`;
}
});
}

function renderFast(){
items.filter(i=>i.fast).forEach(i=>{
fastItems.innerHTML+=`<button onclick="addItem('${i.name}',${i.price})">${i.name}<br>₹${i.price}</button>`;
});
}

function sendWhatsApp(){
if(!currentTable||!tables[currentTable]){alert("No order");return;}
let msg=`Mumbai Special BBQ\n${currentTable}\nPayment: ${payment.value}\n\n`;
for(let i in tables[currentTable]){
let d=tables[currentTable][i];
msg+=`${i} x ${d.qty} = ₹${d.qty*d.price}\n`;
}
msg+=`\nTotal: ₹${total}`;
window.open("https://wa.me/918608776956?text="+encodeURIComponent(msg));
}

function clearTable(){
if(!currentTable)return;
tables[currentTable]={};
calculateTotal();
}

function closeTable(){
if(!currentTable)return;
sales.push({
date:new Date().toLocaleString(),
table:currentTable,
items:tables[currentTable],
total:total,
payment:payment.value
});
localStorage.setItem("sales",JSON.stringify(sales));
tables[currentTable]={};
calculateTotal();
}

function downloadReport(){
let csv="Date,Table,Payment,Total\n";
sales.forEach(s=>{
csv+=`${s.date},${s.table},${s.payment},${s.total}\n`;
});
let blob=new Blob([csv],{type:"text/csv"});
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="sales_report.csv";
a.click();
}

function resetReport(){
localStorage.removeItem("sales");
sales=[];
alert("Sales Reset");
}

initTables();
renderFast();
renderMenu();
</script>

</body>
</html>
